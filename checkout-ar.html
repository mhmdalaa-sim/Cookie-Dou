<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ุงูุฏูุน - ูููู ุฏู: ุจุณูููุช ูุดููููุงุชุฉ ูุตููุนุฉ ูุฏููุงู">
    <title>ุงูุฏูุน - ุญูููุงุช ูููู ุฏู</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="alternate" href="checkout-ar.html" hreflang="ar" />
    <link rel="alternate" href="checkout.html" hreflang="en" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&family=Kufam:wght@500;600;700&family=Poppins:wght@400;500;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="js/Products.js"></script>
</head>
<body class="rtl">
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo"><img src="images/Logo.png" alt="logo"></div>
                <button class="menu-toggle" id="menuToggle" aria-label="ุชุจุฏูู ุงููุงุฆูุฉ">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav class="nav" id="mainNav">
                    <ul>
                        <li><a href="index-ar.html">ุงูุฑุฆูุณูุฉ</a></li>
                        <li><a href="index-ar.html#Products">ุญูููุงุชูุง</a></li>
                        <li><a href="index-ar.html#Reviews">ุขุฑุงุก ุงูุนููุงุก</a></li>
                        <li><a href="index-ar.html#Contact">ุชูุงุตู</a></li>
                        <li><a href="checkout-ar.html" class="cart-link">
                            <span class="cart-icon">๐</span>
                            <span class="cart-count" id="cartCount">0</span>
                        </a></li>
                        <li><a href="checkout.html" lang="en" title="English">EN</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="checkout-container">
        <div class="checkout-header">
            <h1>ุณูุฉ ุงูุชุณูู</h1>
            <p>ุฑุงุฌุน ููุชุฌุงุชู ูุฃููู ุนูููุฉ ุงูุฏูุน</p>
        </div>

        <div id="cartContent"></div>
    </div>

    <script>
        // Arabic checkout uses same cart/js logic but Arabic labels in summary
        class CartManager {
            constructor() {
                this.cart = this.loadCart();
                this.updateCartDisplay();
            }
            loadCart() { try { const s = localStorage.getItem('cookieDouCart'); return s ? JSON.parse(s) : []; } catch { return []; } }
            saveCart() { try { localStorage.setItem('cookieDouCart', JSON.stringify(this.cart)); } catch {} }
            removeFromCart(id) { this.cart = this.cart.filter(i => i.id !== id); this.saveCart(); this.updateCartDisplay(); this.loadCartContent(); }
            updateQuantity(id, q) { const it = this.cart.find(i => i.id === id); if (it) { if (q <= 0) { this.removeFromCart(id); } else { it.quantity = q; this.saveCart(); this.updateCartDisplay(); this.loadCartContent(); } } }
            getTotal() { return this.cart.reduce((t, i) => t + (i.price * i.quantity), 0); }
            getItemCount() { return this.cart.reduce((c, i) => c + i.quantity, 0); }
            updateCartDisplay() { const c = document.getElementById('cartCount'); if (c) { const n = this.getItemCount(); c.textContent = n; c.style.display = n > 0 ? 'flex' : 'none'; } }
            loadCartContent() {
                const el = document.getElementById('cartContent');
                if (this.cart.length === 0) { el.innerHTML = `
                    <div class="empty-cart">
                        <h2>ุณูุชู ูุงุฑุบุฉ</h2>
                        <p>ุฃุถู ุจุนุถ ุญูููุงุช ูููู ุฏู ููุจุฏุก!</p>
                        <a href="index-ar.html#Products">ุชุตูุญ ุงูุญูููุงุช</a>
                    </div>`; return; }
                const total = this.getTotal();
                const shipping = total > 50 ? 0 : 5.99;
                const finalTotal = total + shipping;
                el.innerHTML = `
                    <div class="checkout-content">
                        <div class="cart-items">
                            <h2>ุงููุดุชุฑูุงุช (${this.getItemCount()})</h2>
                            ${this.cart.map(item => `
                                <div class=\"cart-item\">
                                    <img src=\"${item.image}\" alt=\"${item.name}\" class=\"cart-item-image\">
                                    <div class=\"cart-item-details\">
                                        <div class=\"cart-item-name\">${item.name}</div>
                                        <div class=\"cart-item-price\">$${item.price.toFixed(2)} ููู ูุทุนุฉ</div>
                                    </div>
                                    <div class=\"quantity-controls\">
                                        <button class=\"quantity-btn\" onclick=\"cartManager.updateQuantity(${item.id}, ${item.quantity - 1})\">-</button>
                                        <input type=\"number\" class=\"quantity-input\" value=\"${item.quantity}\" min=\"1\" onchange=\"cartManager.updateQuantity(${item.id}, parseInt(this.value))\">
                                        <button class=\"quantity-btn\" onclick=\"cartManager.updateQuantity(${item.id}, ${item.quantity + 1})\">+</button>
                                    </div>
                                    <div class=\"cart-item-price\">$${(item.price * item.quantity).toFixed(2)}</div>
                                    <button class=\"remove-btn\" onclick=\"cartManager.removeFromCart(${item.id})\">ุฅุฒุงูุฉ</button>
                                </div>
                            `).join('')}
                        </div>
                        <div class="order-summary">
                            <h3>ููุฎุต ุงูุทูุจ</h3>
                            <div class="summary-row"><span>ุงููุฌููุน ุงููุฑุนู:</span><span>$${total.toFixed(2)}</span></div>
                            <div class="summary-row"><span>ุงูุดุญู:</span><span>${shipping === 0 ? 'ูุฌุงูู' : `$${shipping.toFixed(2)}`}</span></div>
                            <div class="summary-row total"><span>ุงูุฅุฌูุงูู:</span><span>$${finalTotal.toFixed(2)}</span></div>
                            <div class="checkout-form">
                                <h3>ุจูุงูุงุช ุงูุฏูุน</h3>
                                <p style="background:#e3f2fd;padding:15px;border-radius:5px;margin-bottom:20px;color:#1976d2;font-size:0.9rem;">๐ฑ <strong>ุทูุจ ุนุจุฑ ูุงุชุณุงุจ:</strong> ุณูุชู ุฅุฑุณุงู ุทูุจู ูุจุงุดุฑุฉ ุฅูู ูุงุชุณุงุจ ูุฅุชูุงูู.</p>
                                <form id="checkoutForm">
                                    <div class="form-group"><label for="fullName">ุงูุงุณู ุงููุงูู</label><input type="text" id="fullName" name="fullName" required></div>
                                    <div class="form-group"><label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label><input type="email" id="email" name="email" required></div>
                                    <div class="form-group"><label for="phone">ุฑูู ุงููุงุชู</label><input type="tel" id="phone" name="phone" required></div>
                                    <div class="form-group"><label for="address">ุงูุนููุงู</label><textarea id="address" name="address" rows="3" required></textarea></div>
                                    <div class="form-group"><label for="city">ุงููุฏููุฉ</label><input type="text" id="city" name="city" required></div>
                                    <div class="form-group"><label for="zipCode">ุงูุฑูุฒ ุงูุจุฑูุฏู</label><input type="text" id="zipCode" name="zipCode" required></div>
                                    <button type="submit" class="place-order-btn">๐ฑ ุฅุฑุณุงู ุงูุทูุจ ุฅูู ูุงุชุณุงุจ</button>
                                </form>
                            </div>
                        </div>
                    </div>`;
            }
        }
        const cartManager = new CartManager();
        cartManager.loadCartContent();
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('checkoutForm');
            if (form) form.addEventListener('submit', (e) => { e.preventDefault(); sendOrderToWhatsApp(); });
        });
        function sendOrderToWhatsApp() {
            const whatsappNumber = '201093021103';
            const subtotal = cartManager.getTotal();
            const shipping = subtotal > 50 ? 0 : 5.99;
            const finalTotal = subtotal + shipping;
            const items = cartManager.cart.map(i => `๐ช *${i.name}*\nุงููููุฉ: ${i.quantity}\nุงูุณุนุฑ: $${i.price.toFixed(2)} ููู ูุทุนุฉ\nุงููุฌููุน: $${(i.price * i.quantity).toFixed(2)}`).join('\n\n');
            const message = `๐ *ุทูุจ ุฌุฏูุฏ - ุญูููุงุช ูููู ุฏู*\n\n๐๏ธ *ุงูููุชุฌุงุช:*\n${items}\n\n๐ฐ *ุงูููุฎุต:*\nโข ุงููุฌููุน ุงููุฑุนู: $${subtotal.toFixed(2)}\nโข ุงูุดุญู: ${shipping === 0 ? 'ูุฌุงูู' : `$${shipping.toFixed(2)}`}\nโข *ุงูุฅุฌูุงูู: $${finalTotal.toFixed(2)}*`;
            const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }
        const menuToggle = document.getElementById('menuToggle');
        const mainNav = document.getElementById('mainNav');
        if (menuToggle && mainNav) menuToggle.addEventListener('click', () => { mainNav.classList.toggle('active'); menuToggle.classList.toggle('active'); });
    </script>
</body>
</html>

